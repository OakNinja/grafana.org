define(["../core","./support","../core/init"],function(t,e){var n=/\r/g;t.fn.extend({val:function(e){var i,s,r,o=this[0];{if(arguments.length)return r=t.isFunction(e),this.each(function(n){var s;1===this.nodeType&&(s=r?e.call(this,n,t(this).val()):e,null==s?s="":"number"==typeof s?s+="":t.isArray(s)&&(s=t.map(s,function(t){return null==t?"":t+""})),i=t.valHooks[this.type]||t.valHooks[this.nodeName.toLowerCase()],i&&"set"in i&&void 0!==i.set(this,s,"value")||(this.value=s))});if(o)return i=t.valHooks[o.type]||t.valHooks[o.nodeName.toLowerCase()],i&&"get"in i&&void 0!==(s=i.get(o,"value"))?s:(s=o.value,"string"==typeof s?s.replace(n,""):null==s?"":s)}}}),t.extend({valHooks:{select:{get:function(n){for(var i,s,r=n.options,o=n.selectedIndex,a="select-one"===n.type||0>o,c=a?null:[],l=a?o+1:r.length,u=0>o?l:a?o:0;l>u;u++)if(s=r[u],!(!s.selected&&u!==o||(e.optDisabled?s.disabled:null!==s.getAttribute("disabled"))||s.parentNode.disabled&&t.nodeName(s.parentNode,"optgroup"))){if(i=t(s).val(),a)return i;c.push(i)}return c},set:function(e,n){for(var i,s,r=e.options,o=t.makeArray(n),a=r.length;a--;)s=r[a],(s.selected=t.inArray(t(s).val(),o)>=0)&&(i=!0);return i||(e.selectedIndex=-1),o}}}}),t.each(["radio","checkbox"],function(){t.valHooks[this]={set:function(e,n){return t.isArray(n)?e.checked=t.inArray(t(e).val(),n)>=0:void 0}},e.checkOn||(t.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})})});
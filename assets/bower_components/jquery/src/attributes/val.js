define(["../core","./support","../core/init"],function(t,e){var i=/\r/g;t.fn.extend({val:function(e){var n,s,a,o=this[0];{if(arguments.length)return a=t.isFunction(e),this.each(function(i){var s;1===this.nodeType&&(s=a?e.call(this,i,t(this).val()):e,null==s?s="":"number"==typeof s?s+="":t.isArray(s)&&(s=t.map(s,function(t){return null==t?"":t+""})),n=t.valHooks[this.type]||t.valHooks[this.nodeName.toLowerCase()],n&&"set"in n&&void 0!==n.set(this,s,"value")||(this.value=s))});if(o)return n=t.valHooks[o.type]||t.valHooks[o.nodeName.toLowerCase()],n&&"get"in n&&void 0!==(s=n.get(o,"value"))?s:(s=o.value,"string"==typeof s?s.replace(i,""):null==s?"":s)}}}),t.extend({valHooks:{option:{get:function(e){var i=t.find.attr(e,"value");return null!=i?i:t.trim(t.text(e))}},select:{get:function(i){for(var n,s,a=i.options,o=i.selectedIndex,r="select-one"===i.type||0>o,c=r?null:[],l=r?o+1:a.length,d=0>o?l:r?o:0;l>d;d++)if(s=a[d],!(!s.selected&&d!==o||(e.optDisabled?s.disabled:null!==s.getAttribute("disabled"))||s.parentNode.disabled&&t.nodeName(s.parentNode,"optgroup"))){if(n=t(s).val(),r)return n;c.push(n)}return c},set:function(e,i){for(var n,s,a=e.options,o=t.makeArray(i),r=a.length;r--;)s=a[r],(s.selected=t.inArray(s.value,o)>=0)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),t.each(["radio","checkbox"],function(){t.valHooks[this]={set:function(e,i){return t.isArray(i)?e.checked=t.inArray(t(e).val(),i)>=0:void 0}},e.checkOn||(t.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})})});
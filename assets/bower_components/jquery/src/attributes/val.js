define(["../core","./support","../core/init"],function(e,t){var n=/\r/g;e.fn.extend({val:function(t){var o,a,r,l=this[0];{if(arguments.length)return r=e.isFunction(t),this.each(function(n){var a;1===this.nodeType&&(a=r?t.call(this,n,e(this).val()):t,null==a?a="":"number"==typeof a?a+="":e.isArray(a)&&(a=e.map(a,function(e){return null==e?"":e+""})),o=e.valHooks[this.type]||e.valHooks[this.nodeName.toLowerCase()],o&&"set"in o&&void 0!==o.set(this,a,"value")||(this.value=a))});if(l)return o=e.valHooks[l.type]||e.valHooks[l.nodeName.toLowerCase()],o&&"get"in o&&void 0!==(a=o.get(l,"value"))?a:(a=l.value,"string"==typeof a?a.replace(n,""):null==a?"":a)}}}),e.extend({valHooks:{option:{get:function(t){var n=e.find.attr(t,"value");return null!=n?n:e.trim(e.text(t))}},select:{get:function(n){for(var o,a,r=n.options,l=n.selectedIndex,i="select-one"===n.type||0>l,u=i?null:[],s=i?l+1:r.length,c=0>l?s:i?l:0;s>c;c++)if(a=r[c],!(!a.selected&&c!==l||(t.optDisabled?a.disabled:null!==a.getAttribute("disabled"))||a.parentNode.disabled&&e.nodeName(a.parentNode,"optgroup"))){if(o=e(a).val(),i)return o;u.push(o)}return u},set:function(t,n){for(var o,a,r=t.options,l=e.makeArray(n),i=r.length;i--;)a=r[i],(a.selected=e.inArray(a.value,l)>=0)&&(o=!0);return o||(t.selectedIndex=-1),l}}}}),e.each(["radio","checkbox"],function(){e.valHooks[this]={set:function(t,n){return e.isArray(n)?t.checked=e.inArray(e(t).val(),n)>=0:void 0}},t.checkOn||(e.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})});
define(["./core","./var/indexOf","./traversing/var/rneedsContext","./core/init","./traversing/findFilter","./selector"],function(n,e,t){function i(n,e){for(;(n=n[e])&&1!==n.nodeType;);return n}var r=/^(?:parents|prev(?:Until|All))/,s={children:!0,contents:!0,next:!0,prev:!0};return n.extend({dir:function(e,t,i){for(var r=[],s=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(s&&n(e).is(i))break;r.push(e)}return r},sibling:function(n,e){for(var t=[];n;n=n.nextSibling)1===n.nodeType&&n!==e&&t.push(n);return t}}),n.fn.extend({has:function(e){var t=n(e,this),i=t.length;return this.filter(function(){for(var e=0;i>e;e++)if(n.contains(this,t[e]))return!0})},closest:function(e,i){for(var r,s=0,o=this.length,c=[],u=t.test(e)||"string"!=typeof e?n(e,i||this.context):0;o>s;s++)for(r=this[s];r&&r!==i;r=r.parentNode)if(r.nodeType<11&&(u?u.index(r)>-1:1===r.nodeType&&n.find.matchesSelector(r,e))){c.push(r);break}return this.pushStack(c.length>1?n.unique(c):c)},index:function(t){return t?"string"==typeof t?e.call(n(t),this[0]):e.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(n.unique(n.merge(this.get(),n(e,t))))},addBack:function(n){return this.add(null==n?this.prevObject:this.prevObject.filter(n))}}),n.each({parent:function(n){var e=n.parentNode;return e&&11!==e.nodeType?e:null},parents:function(e){return n.dir(e,"parentNode")},parentsUntil:function(e,t,i){return n.dir(e,"parentNode",i)},next:function(n){return i(n,"nextSibling")},prev:function(n){return i(n,"previousSibling")},nextAll:function(e){return n.dir(e,"nextSibling")},prevAll:function(e){return n.dir(e,"previousSibling")},nextUntil:function(e,t,i){return n.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return n.dir(e,"previousSibling",i)},siblings:function(e){return n.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return n.sibling(e.firstChild)},contents:function(e){return e.contentDocument||n.merge([],e.childNodes)}},function(e,t){n.fn[e]=function(i,o){var c=n.map(this,t,i);return"Until"!==e.slice(-5)&&(o=i),o&&"string"==typeof o&&(c=n.filter(o,c)),this.length>1&&(s[e]||n.unique(c),r.test(e)&&c.reverse()),this.pushStack(c)}}),n});
define(["./core","./var/indexOf","./traversing/var/rneedsContext","./core/init","./traversing/findFilter","./selector"],function(t,n,e){function r(t,n){for(;(t=t[n])&&1!==t.nodeType;);return t}var i=/^(?:parents|prev(?:Until|All))/,s={children:!0,contents:!0,next:!0,prev:!0};return t.extend({dir:function(n,e,r){for(var i=[],s=void 0!==r;(n=n[e])&&9!==n.nodeType;)if(1===n.nodeType){if(s&&t(n).is(r))break;i.push(n)}return i},sibling:function(t,n){for(var e=[];t;t=t.nextSibling)1===t.nodeType&&t!==n&&e.push(t);return e}}),t.fn.extend({has:function(n){var e=t(n,this),r=e.length;return this.filter(function(){for(var n=0;r>n;n++)if(t.contains(this,e[n]))return!0})},closest:function(n,r){for(var i,s=0,o=this.length,c=[],u=e.test(n)||"string"!=typeof n?t(n,r||this.context):0;o>s;s++)for(i=this[s];i&&i!==r;i=i.parentNode)if(i.nodeType<11&&(u?u.index(i)>-1:1===i.nodeType&&t.find.matchesSelector(i,n))){c.push(i);break}return this.pushStack(c.length>1?t.unique(c):c)},index:function(e){return e?"string"==typeof e?n.call(t(e),this[0]):n.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(n,e){return this.pushStack(t.unique(t.merge(this.get(),t(n,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),t.each({parent:function(t){var n=t.parentNode;return n&&11!==n.nodeType?n:null},parents:function(n){return t.dir(n,"parentNode")},parentsUntil:function(n,e,r){return t.dir(n,"parentNode",r)},next:function(t){return r(t,"nextSibling")},prev:function(t){return r(t,"previousSibling")},nextAll:function(n){return t.dir(n,"nextSibling")},prevAll:function(n){return t.dir(n,"previousSibling")},nextUntil:function(n,e,r){return t.dir(n,"nextSibling",r)},prevUntil:function(n,e,r){return t.dir(n,"previousSibling",r)},siblings:function(n){return t.sibling((n.parentNode||{}).firstChild,n)},children:function(n){return t.sibling(n.firstChild)},contents:function(n){return n.contentDocument||t.merge([],n.childNodes)}},function(n,e){t.fn[n]=function(r,o){var c=t.map(this,e,r);return"Until"!==n.slice(-5)&&(o=r),o&&"string"==typeof o&&(c=t.filter(o,c)),this.length>1&&(s[n]||t.unique(c),i.test(n)&&c.reverse()),this.pushStack(c)}}),t});
define(["../core","../var/indexOf","./var/rneedsContext","../selector"],function(e,t,n){function i(n,i,s){if(e.isFunction(i))return e.grep(n,function(e,t){return!!i.call(e,t,e)!==s});if(i.nodeType)return e.grep(n,function(e){return e===i!==s});if("string"==typeof i){if(r.test(i))return e.filter(i,n,s);i=e.filter(i,n)}return e.grep(n,function(e){return t.call(i,e)>=0!==s})}var r=/^.[^:#\[\.,]*$/;e.filter=function(t,n,i){var r=n[0];return i&&(t=":not("+t+")"),1===n.length&&1===r.nodeType?e.find.matchesSelector(r,t)?[r]:[]:e.find.matches(t,e.grep(n,function(e){return 1===e.nodeType}))},e.fn.extend({find:function(t){var n,i=this.length,r=[],s=this;if("string"!=typeof t)return this.pushStack(e(t).filter(function(){for(n=0;i>n;n++)if(e.contains(s[n],this))return!0}));for(n=0;i>n;n++)e.find(t,s[n],r);return r=this.pushStack(i>1?e.unique(r):r),r.selector=this.selector?this.selector+" "+t:t,r},filter:function(e){return this.pushStack(i(this,e||[],!1))},not:function(e){return this.pushStack(i(this,e||[],!0))},is:function(t){return!!i(this,"string"==typeof t&&n.test(t)?e(t):t||[],!1).length}})});
define(["./core","./var/pnum","./css/var/cssExpand","./css/var/isHidden","./css/defaultDisplay","./data/var/data_priv","./core/init","./effects/Tween","./queue","./css","./deferred","./traversing"],function(t,e,n,i,s,a){function o(){return setTimeout(function(){h=void 0}),h=t.now()}function r(t,e){var i,s=0,a={height:t};for(e=e?1:0;4>s;s+=2-e)i=n[s],a["margin"+i]=a["padding"+i]=t;return e&&(a.opacity=a.width=t),a}function l(t,e,n){for(var i,s=(_[e]||[]).concat(_["*"]),a=0,o=s.length;o>a;a++)if(i=s[a].call(n,e,t))return i}function c(e,n,o){var r,c,u,d,h,f,g,m=this,v={},_=e.style,y=e.nodeType&&i(e),b=a.get(e,"fxshow");o.queue||(h=t._queueHooks(e,"fx"),null==h.unqueued&&(h.unqueued=0,f=h.empty.fire,h.empty.fire=function(){h.unqueued||f()}),h.unqueued++,m.always(function(){m.always(function(){h.unqueued--,t.queue(e,"fx").length||h.empty.fire()})})),1===e.nodeType&&("height"in n||"width"in n)&&(o.overflow=[_.overflow,_.overflowX,_.overflowY],g=t.css(e,"display"),"none"===g&&(g=s(e.nodeName)),"inline"===g&&"none"===t.css(e,"float")&&(_.display="inline-block")),o.overflow&&(_.overflow="hidden",m.always(function(){_.overflow=o.overflow[0],_.overflowX=o.overflow[1],_.overflowY=o.overflow[2]}));for(r in n)if(c=n[r],p.exec(c)){if(delete n[r],u=u||"toggle"===c,c===(y?"hide":"show")){if("show"!==c||!b||void 0===b[r])continue;y=!0}v[r]=b&&b[r]||t.style(e,r)}if(!t.isEmptyObject(v)){b?"hidden"in b&&(y=b.hidden):b=a.access(e,"fxshow",{}),u&&(b.hidden=!y),y?t(e).show():m.done(function(){t(e).hide()}),m.done(function(){var n;a.remove(e,"fxshow");for(n in v)t.style(e,n,v[n])});for(r in v)d=l(y?b[r]:0,r,m),r in b||(b[r]=d.start,y&&(d.end=d.start,d.start="width"===r||"height"===r?1:0))}}function u(e,n){var i,s,a,o,r;for(i in e)if(s=t.camelCase(i),a=n[s],o=e[i],t.isArray(o)&&(a=o[1],o=e[i]=o[0]),i!==s&&(e[s]=o,delete e[i]),r=t.cssHooks[s],r&&"expand"in r){o=r.expand(o),delete e[s];for(i in o)i in e||(e[i]=o[i],n[i]=a)}else n[s]=a}function d(e,n,i){var s,a,r=0,c=v.length,d=t.Deferred().always(function(){delete f.elem}),f=function(){if(a)return!1;for(var t=h||o(),n=Math.max(0,p.startTime+p.duration-t),i=n/p.duration||0,s=1-i,r=0,l=p.tweens.length;l>r;r++)p.tweens[r].run(s);return d.notifyWith(e,[p,s,n]),1>s&&l?n:(d.resolveWith(e,[p]),!1)},p=d.promise({elem:e,props:t.extend({},n),opts:t.extend(!0,{specialEasing:{}},i),originalProperties:n,originalOptions:i,startTime:h||o(),duration:i.duration,tweens:[],createTween:function(n,i){var s=t.Tween(e,p.opts,n,i,p.opts.specialEasing[n]||p.opts.easing);return p.tweens.push(s),s},stop:function(t){var n=0,i=t?p.tweens.length:0;if(a)return this;for(a=!0;i>n;n++)p.tweens[n].run(1);return t?d.resolveWith(e,[p,t]):d.rejectWith(e,[p,t]),this}}),g=p.props;for(u(g,p.opts.specialEasing);c>r;r++)if(s=v[r].call(p,e,g,p.opts))return s;return t.map(g,l,p),t.isFunction(p.opts.start)&&p.opts.start.call(e,p),t.fx.timer(t.extend(f,{elem:e,anim:p,queue:p.opts.queue})),p.progress(p.opts.progress).done(p.opts.done,p.opts.complete).fail(p.opts.fail).always(p.opts.always)}var h,f,p=/^(?:toggle|show|hide)$/,g=new RegExp("^(?:([+-])=|)("+e+")([a-z%]*)$","i"),m=/queueHooks$/,v=[c],_={"*":[function(e,n){var i=this.createTween(e,n),s=i.cur(),a=g.exec(n),o=a&&a[3]||(t.cssNumber[e]?"":"px"),r=(t.cssNumber[e]||"px"!==o&&+s)&&g.exec(t.css(i.elem,e)),l=1,c=20;if(r&&r[3]!==o){o=o||r[3],a=a||[],r=+s||1;do l=l||".5",r/=l,t.style(i.elem,e,r+o);while(l!==(l=i.cur()/s)&&1!==l&&--c)}return a&&(r=i.start=+r||+s||0,i.unit=o,i.end=a[1]?r+(a[1]+1)*a[2]:+a[2]),i}]};return t.Animation=t.extend(d,{tweener:function(e,n){t.isFunction(e)?(n=e,e=["*"]):e=e.split(" ");for(var i,s=0,a=e.length;a>s;s++)i=e[s],_[i]=_[i]||[],_[i].unshift(n)},prefilter:function(t,e){e?v.unshift(t):v.push(t)}}),t.speed=function(e,n,i){var s=e&&"object"==typeof e?t.extend({},e):{complete:i||!i&&n||t.isFunction(e)&&e,duration:e,easing:i&&n||n&&!t.isFunction(n)&&n};return s.duration=t.fx.off?0:"number"==typeof s.duration?s.duration:s.duration in t.fx.speeds?t.fx.speeds[s.duration]:t.fx.speeds._default,(null==s.queue||s.queue===!0)&&(s.queue="fx"),s.old=s.complete,s.complete=function(){t.isFunction(s.old)&&s.old.call(this),s.queue&&t.dequeue(this,s.queue)},s},t.fn.extend({fadeTo:function(t,e,n,s){return this.filter(i).css("opacity",0).show().end().animate({opacity:e},t,n,s)},animate:function(e,n,i,s){var o=t.isEmptyObject(e),r=t.speed(n,i,s),l=function(){var n=d(this,t.extend({},e),r);(o||a.get(this,"finish"))&&n.stop(!0)};return l.finish=l,o||r.queue===!1?this.each(l):this.queue(r.queue,l)},stop:function(e,n,i){var s=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof e&&(i=n,n=e,e=void 0),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var n=!0,o=null!=e&&e+"queueHooks",r=t.timers,l=a.get(this);if(o)l[o]&&l[o].stop&&s(l[o]);else for(o in l)l[o]&&l[o].stop&&m.test(o)&&s(l[o]);for(o=r.length;o--;)r[o].elem!==this||null!=e&&r[o].queue!==e||(r[o].anim.stop(i),n=!1,r.splice(o,1));(n||!i)&&t.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var n,i=a.get(this),s=i[e+"queue"],o=i[e+"queueHooks"],r=t.timers,l=s?s.length:0;for(i.finish=!0,t.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),n=r.length;n--;)r[n].elem===this&&r[n].queue===e&&(r[n].anim.stop(!0),r.splice(n,1));for(n=0;l>n;n++)s[n]&&s[n].finish&&s[n].finish.call(this);delete i.finish})}}),t.each(["toggle","show","hide"],function(e,n){var i=t.fn[n];t.fn[n]=function(t,e,s){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(r(n,!0),t,e,s)}}),t.each({slideDown:r("show"),slideUp:r("hide"),slideToggle:r("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,n){t.fn[e]=function(t,e,i){return this.animate(n,t,e,i)}}),t.timers=[],t.fx.tick=function(){var e,n=0,i=t.timers;for(h=t.now();n<i.length;n++)e=i[n],e()||i[n]!==e||i.splice(n--,1);i.length||t.fx.stop(),h=void 0},t.fx.timer=function(e){t.timers.push(e),e()?t.fx.start():t.timers.pop()},t.fx.interval=13,t.fx.start=function(){f||(f=setInterval(t.fx.tick,t.fx.interval))},t.fx.stop=function(){clearInterval(f),f=null},t.fx.speeds={slow:600,fast:200,_default:400},t});
define(["./core","./var/pnum","./css/var/cssExpand","./css/var/isHidden","./css/defaultDisplay","./data/var/data_priv","./core/init","./effects/Tween","./queue","./css","./deferred","./traversing"],function(e,t,n,i,r,o){function s(){return setTimeout(function(){d=void 0}),d=e.now()}function u(e,t){var i,r=0,o={height:e};for(t=t?1:0;4>r;r+=2-t)i=n[r],o["margin"+i]=o["padding"+i]=e;return t&&(o.opacity=o.width=e),o}function f(e,t,n){for(var i,r=(y[t]||[]).concat(y["*"]),o=0,s=r.length;s>o;o++)if(i=r[o].call(n,t,e))return i}function a(t,n,s){var u,a,c,l,d,h,m,g=this,v={},y=t.style,w=t.nodeType&&i(t),x=o.get(t,"fxshow");s.queue||(d=e._queueHooks(t,"fx"),null==d.unqueued&&(d.unqueued=0,h=d.empty.fire,d.empty.fire=function(){d.unqueued||h()}),d.unqueued++,g.always(function(){g.always(function(){d.unqueued--,e.queue(t,"fx").length||d.empty.fire()})})),1===t.nodeType&&("height"in n||"width"in n)&&(s.overflow=[y.overflow,y.overflowX,y.overflowY],m=e.css(t,"display"),"none"===m&&(m=r(t.nodeName)),"inline"===m&&"none"===e.css(t,"float")&&(y.display="inline-block")),s.overflow&&(y.overflow="hidden",g.always(function(){y.overflow=s.overflow[0],y.overflowX=s.overflow[1],y.overflowY=s.overflow[2]}));for(u in n)if(a=n[u],p.exec(a)){if(delete n[u],c=c||"toggle"===a,a===(w?"hide":"show")){if("show"!==a||!x||void 0===x[u])continue;w=!0}v[u]=x&&x[u]||e.style(t,u)}if(!e.isEmptyObject(v)){x?"hidden"in x&&(w=x.hidden):x=o.access(t,"fxshow",{}),c&&(x.hidden=!w),w?e(t).show():g.done(function(){e(t).hide()}),g.done(function(){var n;o.remove(t,"fxshow");for(n in v)e.style(t,n,v[n])});for(u in v)l=f(w?x[u]:0,u,g),u in x||(x[u]=l.start,w&&(l.end=l.start,l.start="width"===u||"height"===u?1:0))}}function c(t,n){var i,r,o,s,u;for(i in t)if(r=e.camelCase(i),o=n[r],s=t[i],e.isArray(s)&&(o=s[1],s=t[i]=s[0]),i!==r&&(t[r]=s,delete t[i]),u=e.cssHooks[r],u&&"expand"in u){s=u.expand(s),delete t[r];for(i in s)i in t||(t[i]=s[i],n[i]=o)}else n[r]=o}function l(t,n,i){var r,o,u=0,a=v.length,l=e.Deferred().always(function(){delete h.elem}),h=function(){if(o)return!1;for(var e=d||s(),n=Math.max(0,p.startTime+p.duration-e),i=n/p.duration||0,r=1-i,u=0,f=p.tweens.length;f>u;u++)p.tweens[u].run(r);return l.notifyWith(t,[p,r,n]),1>r&&f?n:(l.resolveWith(t,[p]),!1)},p=l.promise({elem:t,props:e.extend({},n),opts:e.extend(!0,{specialEasing:{}},i),originalProperties:n,originalOptions:i,startTime:d||s(),duration:i.duration,tweens:[],createTween:function(n,i){var r=e.Tween(t,p.opts,n,i,p.opts.specialEasing[n]||p.opts.easing);return p.tweens.push(r),r},stop:function(e){var n=0,i=e?p.tweens.length:0;if(o)return this;for(o=!0;i>n;n++)p.tweens[n].run(1);return e?l.resolveWith(t,[p,e]):l.rejectWith(t,[p,e]),this}}),m=p.props;for(c(m,p.opts.specialEasing);a>u;u++)if(r=v[u].call(p,t,m,p.opts))return r;return e.map(m,f,p),e.isFunction(p.opts.start)&&p.opts.start.call(t,p),e.fx.timer(e.extend(h,{elem:t,anim:p,queue:p.opts.queue})),p.progress(p.opts.progress).done(p.opts.done,p.opts.complete).fail(p.opts.fail).always(p.opts.always)}var d,h,p=/^(?:toggle|show|hide)$/,m=new RegExp("^(?:([+-])=|)("+t+")([a-z%]*)$","i"),g=/queueHooks$/,v=[a],y={"*":[function(t,n){var i=this.createTween(t,n),r=i.cur(),o=m.exec(n),s=o&&o[3]||(e.cssNumber[t]?"":"px"),u=(e.cssNumber[t]||"px"!==s&&+r)&&m.exec(e.css(i.elem,t)),f=1,a=20;if(u&&u[3]!==s){s=s||u[3],o=o||[],u=+r||1;do f=f||".5",u/=f,e.style(i.elem,t,u+s);while(f!==(f=i.cur()/r)&&1!==f&&--a)}return o&&(u=i.start=+u||+r||0,i.unit=s,i.end=o[1]?u+(o[1]+1)*o[2]:+o[2]),i}]};return e.Animation=e.extend(l,{tweener:function(t,n){e.isFunction(t)?(n=t,t=["*"]):t=t.split(" ");for(var i,r=0,o=t.length;o>r;r++)i=t[r],y[i]=y[i]||[],y[i].unshift(n)},prefilter:function(e,t){t?v.unshift(e):v.push(e)}}),e.speed=function(t,n,i){var r=t&&"object"==typeof t?e.extend({},t):{complete:i||!i&&n||e.isFunction(t)&&t,duration:t,easing:i&&n||n&&!e.isFunction(n)&&n};return r.duration=e.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in e.fx.speeds?e.fx.speeds[r.duration]:e.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){e.isFunction(r.old)&&r.old.call(this),r.queue&&e.dequeue(this,r.queue)},r},e.fn.extend({fadeTo:function(e,t,n,r){return this.filter(i).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,n,i,r){var s=e.isEmptyObject(t),u=e.speed(n,i,r),f=function(){var n=l(this,e.extend({},t),u);(s||o.get(this,"finish"))&&n.stop(!0)};return f.finish=f,s||u.queue===!1?this.each(f):this.queue(u.queue,f)},stop:function(t,n,i){var r=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof t&&(i=n,n=t,t=void 0),n&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var n=!0,s=null!=t&&t+"queueHooks",u=e.timers,f=o.get(this);if(s)f[s]&&f[s].stop&&r(f[s]);else for(s in f)f[s]&&f[s].stop&&g.test(s)&&r(f[s]);for(s=u.length;s--;)u[s].elem!==this||null!=t&&u[s].queue!==t||(u[s].anim.stop(i),n=!1,u.splice(s,1));(n||!i)&&e.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var n,i=o.get(this),r=i[t+"queue"],s=i[t+"queueHooks"],u=e.timers,f=r?r.length:0;for(i.finish=!0,e.queue(this,t,[]),s&&s.stop&&s.stop.call(this,!0),n=u.length;n--;)u[n].elem===this&&u[n].queue===t&&(u[n].anim.stop(!0),u.splice(n,1));for(n=0;f>n;n++)r[n]&&r[n].finish&&r[n].finish.call(this);delete i.finish})}}),e.each(["toggle","show","hide"],function(t,n){var i=e.fn[n];e.fn[n]=function(e,t,r){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(u(n,!0),e,t,r)}}),e.each({slideDown:u("show"),slideUp:u("hide"),slideToggle:u("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,n){e.fn[t]=function(e,t,i){return this.animate(n,e,t,i)}}),e.timers=[],e.fx.tick=function(){var t,n=0,i=e.timers;for(d=e.now();n<i.length;n++)t=i[n],t()||i[n]!==t||i.splice(n--,1);i.length||e.fx.stop(),d=void 0},e.fx.timer=function(t){e.timers.push(t),t()?e.fx.start():e.timers.pop()},e.fx.interval=13,e.fx.start=function(){h||(h=setInterval(e.fx.tick,e.fx.interval))},e.fx.stop=function(){clearInterval(h),h=null},e.fx.speeds={slow:600,fast:200,_default:400},e});
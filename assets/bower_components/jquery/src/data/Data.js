define(["../core","../var/rnotwhite","./accepts"],function(e,t){function n(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=e.expando+Math.random()}return n.uid=1,n.accepts=e.acceptData,n.prototype={key:function(t){if(!n.accepts(t))return 0;var r={},o=t[this.expando];if(!o){o=n.uid++;try{r[this.expando]={value:o},Object.defineProperties(t,r)}catch(i){r[this.expando]=o,e.extend(t,r)}}return this.cache[o]||(this.cache[o]={}),o},set:function(t,n,r){var o,i=this.key(t),a=this.cache[i];if("string"==typeof n)a[n]=r;else if(e.isEmptyObject(a))e.extend(this.cache[i],n);else for(o in n)a[o]=n[o];return a},get:function(e,t){var n=this.cache[this.key(e)];return void 0===t?n:n[t]},access:function(t,n,r){var o;return void 0===n||n&&"string"==typeof n&&void 0===r?(o=this.get(t,n),void 0!==o?o:this.get(t,e.camelCase(n))):(this.set(t,n,r),void 0!==r?r:n)},remove:function(n,r){var o,i,a,u=this.key(n),s=this.cache[u];if(void 0===r)this.cache[u]={};else{e.isArray(r)?i=r.concat(r.map(e.camelCase)):(a=e.camelCase(r),r in s?i=[r,a]:(i=a,i=i in s?[i]:i.match(t)||[])),o=i.length;for(;o--;)delete s[i[o]]}},hasData:function(t){return!e.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}},n});
define(["../core","../var/rnotwhite","./accepts"],function(e,t){function a(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=e.expando+Math.random()}return a.uid=1,a.accepts=e.acceptData,a.prototype={key:function(t){if(!a.accepts(t))return 0;var l={},s=t[this.expando];if(!s){s=a.uid++;try{l[this.expando]={value:s},Object.defineProperties(t,l)}catch(r){l[this.expando]=s,e.extend(t,l)}}return this.cache[s]||(this.cache[s]={}),s},set:function(t,a,l){var s,r=this.key(t),o=this.cache[r];if("string"==typeof a)o[a]=l;else if(e.isEmptyObject(o))e.extend(this.cache[r],a);else for(s in a)o[s]=a[s];return o},get:function(e,t){var a=this.cache[this.key(e)];return void 0===t?a:a[t]},access:function(t,a,l){var s;return void 0===a||a&&"string"==typeof a&&void 0===l?(s=this.get(t,a),void 0!==s?s:this.get(t,e.camelCase(a))):(this.set(t,a,l),void 0!==l?l:a)},remove:function(a,l){var s,r,o,c=this.key(a),i=this.cache[c];if(void 0===l)this.cache[c]={};else{e.isArray(l)?r=l.concat(l.map(e.camelCase)):(o=e.camelCase(l),l in i?r=[l,o]:(r=o,r=r in i?[r]:r.match(t)||[])),s=r.length;for(;s--;)delete i[r[s]]}},hasData:function(t){return!e.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}},a});
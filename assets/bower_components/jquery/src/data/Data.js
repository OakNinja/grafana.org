define(["../core","../var/rnotwhite","./accepts"],function(e,t){function a(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=e.expando+Math.random()}return a.uid=1,a.accepts=e.acceptData,a.prototype={key:function(t){if(!a.accepts(t))return 0;var s={},i=t[this.expando];if(!i){i=a.uid++;try{s[this.expando]={value:i},Object.defineProperties(t,s)}catch(n){s[this.expando]=i,e.extend(t,s)}}return this.cache[i]||(this.cache[i]={}),i},set:function(t,a,s){var i,n=this.key(t),c=this.cache[n];if("string"==typeof a)c[a]=s;else if(e.isEmptyObject(c))e.extend(this.cache[n],a);else for(i in a)c[i]=a[i];return c},get:function(e,t){var a=this.cache[this.key(e)];return void 0===t?a:a[t]},access:function(t,a,s){var i;return void 0===a||a&&"string"==typeof a&&void 0===s?(i=this.get(t,a),void 0!==i?i:this.get(t,e.camelCase(a))):(this.set(t,a,s),void 0!==s?s:a)},remove:function(a,s){var i,n,c,r=this.key(a),o=this.cache[r];if(void 0===s)this.cache[r]={};else{e.isArray(s)?n=s.concat(s.map(e.camelCase)):(c=e.camelCase(s),s in o?n=[s,c]:(n=c,n=n in o?[n]:n.match(t)||[])),i=n.length;for(;i--;)delete o[n[i]]}},hasData:function(t){return!e.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}},a});
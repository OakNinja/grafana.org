define(["../core","../var/rnotwhite","./accepts"],function(t,e){function n(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=t.expando+Math.random()}return n.uid=1,n.accepts=t.acceptData,n.prototype={key:function(e){if(!n.accepts(e))return 0;var i={},s=e[this.expando];if(!s){s=n.uid++;try{i[this.expando]={value:s},Object.defineProperties(e,i)}catch(a){i[this.expando]=s,t.extend(e,i)}}return this.cache[s]||(this.cache[s]={}),s},set:function(e,n,i){var s,a=this.key(e),o=this.cache[a];if("string"==typeof n)o[n]=i;else if(t.isEmptyObject(o))t.extend(this.cache[a],n);else for(s in n)o[s]=n[s];return o},get:function(t,e){var n=this.cache[this.key(t)];return void 0===e?n:n[e]},access:function(e,n,i){var s;return void 0===n||n&&"string"==typeof n&&void 0===i?(s=this.get(e,n),void 0!==s?s:this.get(e,t.camelCase(n))):(this.set(e,n,i),void 0!==i?i:n)},remove:function(n,i){var s,a,o,r=this.key(n),l=this.cache[r];if(void 0===i)this.cache[r]={};else{t.isArray(i)?a=i.concat(i.map(t.camelCase)):(o=t.camelCase(i),i in l?a=[i,o]:(a=o,a=a in l?[a]:a.match(e)||[])),s=a.length;for(;s--;)delete l[a[s]]}},hasData:function(e){return!t.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}},n});
define(["./core","./var/rnotwhite","./ajax/var/nonce","./ajax/var/rquery","./core/init","./ajax/parseJSON","./ajax/parseXML","./deferred"],function(e,t,r,a){function n(r){return function(a,n){"string"!=typeof a&&(n=a,a="*");var o,s=0,i=a.toLowerCase().match(t)||[];if(e.isFunction(n))for(;o=i[s++];)"+"===o[0]?(o=o.slice(1)||"*",(r[o]=r[o]||[]).unshift(n)):(r[o]=r[o]||[]).push(n)}}function o(t,r,a,n){function o(c){var u;return s[c]=!0,e.each(t[c]||[],function(e,t){var c=t(r,a,n);return"string"!=typeof c||i||s[c]?i?!(u=c):void 0:(r.dataTypes.unshift(c),o(c),!1)}),u}var s={},i=t===v;return o(r.dataTypes[0])||!s["*"]&&o("*")}function s(t,r){var a,n,o=e.ajaxSettings.flatOptions||{};for(a in r)void 0!==r[a]&&((o[a]?t:n||(n={}))[a]=r[a]);return n&&e.extend(!0,t,n),t}function i(e,t,r){for(var a,n,o,s,i=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===a&&(a=e.mimeType||t.getResponseHeader("Content-Type"));if(a)for(n in i)if(i[n]&&i[n].test(a)){c.unshift(n);break}if(c[0]in r)o=c[0];else{for(n in r){if(!c[0]||e.converters[n+" "+c[0]]){o=n;break}s||(s=n)}o=o||s}return o?(o!==c[0]&&c.unshift(o),r[o]):void 0}function c(e,t,r,a){var n,o,s,i,c,u={},f=e.dataTypes.slice();if(f[1])for(s in e.converters)u[s.toLowerCase()]=e.converters[s];for(o=f.shift();o;)if(e.responseFields[o]&&(r[e.responseFields[o]]=t),!c&&a&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=o,o=f.shift())if("*"===o)o=c;else if("*"!==c&&c!==o){if(s=u[c+" "+o]||u["* "+o],!s)for(n in u)if(i=n.split(" "),i[1]===o&&(s=u[c+" "+i[0]]||u["* "+i[0]])){s===!0?s=u[n]:u[n]!==!0&&(o=i[0],f.unshift(i[1]));break}if(s!==!0)if(s&&e["throws"])t=s(t);else try{t=s(t)}catch(d){return{state:"parsererror",error:s?d:"No conversion from "+c+" to "+o}}}return{state:"success",data:t}}var u,f,d=/#.*$/,p=/([?&])_=[^&]*/,l=/^(.*?):[ \t]*([^\r\n]*)$/gm,x=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,y=/^(?:GET|HEAD)$/,h=/^\/\//,m=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,g={},v={},j="*/".concat("*");try{f=location.href}catch(T){f=document.createElement("a"),f.href="",f=f.href}return u=m.exec(f.toLowerCase())||[],e.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:f,type:"GET",isLocal:x.test(u[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":j,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":e.parseJSON,"text xml":e.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,r){return r?s(s(t,e.ajaxSettings),r):s(e.ajaxSettings,t)},ajaxPrefilter:n(g),ajaxTransport:n(v),ajax:function(n,s){function x(t,r,a,n){var o,s,u,f,d,p=r;2!==$&&($=2,M&&clearTimeout(M),T=void 0,C=n||"",A.readyState=t>0?4:0,o=t>=200&&300>t||304===t,a&&(f=i(R,A,a)),f=c(R,f,A,o),o?(R.ifModified&&(d=A.getResponseHeader("Last-Modified"),d&&(e.lastModified[S]=d),d=A.getResponseHeader("etag"),d&&(e.etag[S]=d)),204===t||"HEAD"===R.type?p="nocontent":304===t?p="notmodified":(p=f.state,s=f.data,u=f.error,o=!u)):(u=p,(t||!p)&&(p="error",0>t&&(t=0))),A.status=t,A.statusText=(r||p)+"",o?D.resolveWith(F,[s,p,A]):D.rejectWith(F,[A,p,u]),A.statusCode(N),N=void 0,b&&q.trigger(o?"ajaxSuccess":"ajaxError",[A,R,o?s:u]),E.fireWith(F,[A,p]),b&&(q.trigger("ajaxComplete",[A,R]),--e.active||e.event.trigger("ajaxStop")))}"object"==typeof n&&(s=n,n=void 0),s=s||{};var T,S,C,w,M,L,b,H,R=e.ajaxSetup({},s),F=R.context||R,q=R.context&&(F.nodeType||F.jquery)?e(F):e.event,D=e.Deferred(),E=e.Callbacks("once memory"),N=R.statusCode||{},O={},X={},$=0,k="canceled",A={readyState:0,getResponseHeader:function(e){var t;if(2===$){if(!w)for(w={};t=l.exec(C);)w[t[1].toLowerCase()]=t[2];t=w[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===$?C:null},setRequestHeader:function(e,t){var r=e.toLowerCase();return $||(e=X[r]=X[r]||e,O[e]=t),this},overrideMimeType:function(e){return $||(R.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>$)for(t in e)N[t]=[N[t],e[t]];else A.always(e[A.status]);return this},abort:function(e){var t=e||k;return T&&T.abort(t),x(0,t),this}};if(D.promise(A).complete=E.add,A.success=A.done,A.error=A.fail,R.url=((n||R.url||f)+"").replace(d,"").replace(h,u[1]+"//"),R.type=s.method||s.type||R.method||R.type,R.dataTypes=e.trim(R.dataType||"*").toLowerCase().match(t)||[""],null==R.crossDomain&&(L=m.exec(R.url.toLowerCase()),R.crossDomain=!(!L||L[1]===u[1]&&L[2]===u[2]&&(L[3]||("http:"===L[1]?"80":"443"))===(u[3]||("http:"===u[1]?"80":"443")))),R.data&&R.processData&&"string"!=typeof R.data&&(R.data=e.param(R.data,R.traditional)),o(g,R,s,A),2===$)return A;b=R.global,b&&0===e.active++&&e.event.trigger("ajaxStart"),R.type=R.type.toUpperCase(),R.hasContent=!y.test(R.type),S=R.url,R.hasContent||(R.data&&(S=R.url+=(a.test(S)?"&":"?")+R.data,delete R.data),R.cache===!1&&(R.url=p.test(S)?S.replace(p,"$1_="+r++):S+(a.test(S)?"&":"?")+"_="+r++)),R.ifModified&&(e.lastModified[S]&&A.setRequestHeader("If-Modified-Since",e.lastModified[S]),e.etag[S]&&A.setRequestHeader("If-None-Match",e.etag[S])),(R.data&&R.hasContent&&R.contentType!==!1||s.contentType)&&A.setRequestHeader("Content-Type",R.contentType),A.setRequestHeader("Accept",R.dataTypes[0]&&R.accepts[R.dataTypes[0]]?R.accepts[R.dataTypes[0]]+("*"!==R.dataTypes[0]?", "+j+"; q=0.01":""):R.accepts["*"]);for(H in R.headers)A.setRequestHeader(H,R.headers[H]);if(R.beforeSend&&(R.beforeSend.call(F,A,R)===!1||2===$))return A.abort();k="abort";for(H in{success:1,error:1,complete:1})A[H](R[H]);if(T=o(v,R,s,A)){A.readyState=1,b&&q.trigger("ajaxSend",[A,R]),R.async&&R.timeout>0&&(M=setTimeout(function(){A.abort("timeout")},R.timeout));try{$=1,T.send(O,x)}catch(J){if(!(2>$))throw J;x(-1,J)}}else x(-1,"No Transport");return A},getJSON:function(t,r,a){return e.get(t,r,a,"json")},getScript:function(t,r){return e.get(t,void 0,r,"script")}}),e.each(["get","post"],function(t,r){e[r]=function(t,a,n,o){return e.isFunction(a)&&(o=o||n,n=a,a=void 0),e.ajax({url:t,type:r,dataType:o,data:a,success:n})}}),e.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,r){e.fn[r]=function(e){return this.on(r,e)}}),e});
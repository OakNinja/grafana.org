define(["./core","./var/rnotwhite","./ajax/var/nonce","./ajax/var/rquery","./core/init","./ajax/parseJSON","./ajax/parseXML","./deferred"],function(t,e,n,i){function s(n){return function(i,s){"string"!=typeof i&&(s=i,i="*");var r,a=0,o=i.toLowerCase().match(e)||[];if(t.isFunction(s))for(;r=o[a++];)"+"===r[0]?(r=r.slice(1)||"*",(n[r]=n[r]||[]).unshift(s)):(n[r]=n[r]||[]).push(s)}}function r(e,n,i,s){function r(l){var c;return a[l]=!0,t.each(e[l]||[],function(t,e){var l=e(n,i,s);return"string"!=typeof l||o||a[l]?o?!(c=l):void 0:(n.dataTypes.unshift(l),r(l),!1)}),c}var a={},o=e===v;return r(n.dataTypes[0])||!a["*"]&&r("*")}function a(e,n){var i,s,r=t.ajaxSettings.flatOptions||{};for(i in n)void 0!==n[i]&&((r[i]?e:s||(s={}))[i]=n[i]);return s&&t.extend(!0,e,s),e}function o(t,e,n){for(var i,s,r,a,o=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(s in o)if(o[s]&&o[s].test(i)){l.unshift(s);break}if(l[0]in n)r=l[0];else{for(s in n){if(!l[0]||t.converters[s+" "+l[0]]){r=s;break}a||(a=s)}r=r||a}return r?(r!==l[0]&&l.unshift(r),n[r]):void 0}function l(t,e,n,i){var s,r,a,o,l,c={},u=t.dataTypes.slice();if(u[1])for(a in t.converters)c[a.toLowerCase()]=t.converters[a];for(r=u.shift();r;)if(t.responseFields[r]&&(n[t.responseFields[r]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=r,r=u.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(a=c[l+" "+r]||c["* "+r],!a)for(s in c)if(o=s.split(" "),o[1]===r&&(a=c[l+" "+o[0]]||c["* "+o[0]])){a===!0?a=c[s]:c[s]!==!0&&(r=o[0],u.unshift(o[1]));break}if(a!==!0)if(a&&t["throws"])e=a(e);else try{e=a(e)}catch(d){return{state:"parsererror",error:a?d:"No conversion from "+l+" to "+r}}}return{state:"success",data:e}}var c=/#.*$/,u=/([?&])_=[^&]*/,d=/^(.*?):[ \t]*([^\r\n]*)$/gm,f=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,h=/^(?:GET|HEAD)$/,p=/^\/\//,g=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,m={},v={},_="*/".concat("*"),y=window.location.href,b=g.exec(y.toLowerCase())||[];return t.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:y,type:"GET",isLocal:f.test(b[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":_,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":t.parseJSON,"text xml":t.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,n){return n?a(a(e,t.ajaxSettings),n):a(t.ajaxSettings,e)},ajaxPrefilter:s(m),ajaxTransport:s(v),ajax:function(s,a){function f(e,n,i,s){var r,a,c,u,d,f=n;2!==H&&(H=2,S&&clearTimeout(S),x=void 0,k=s||"",z.readyState=e>0?4:0,r=e>=200&&300>e||304===e,i&&(u=o(j,z,i)),u=l(j,u,z,r),r?(j.ifModified&&(d=z.getResponseHeader("Last-Modified"),d&&(t.lastModified[w]=d),d=z.getResponseHeader("etag"),d&&(t.etag[w]=d)),204===e||"HEAD"===j.type?f="nocontent":304===e?f="notmodified":(f=u.state,a=u.data,c=u.error,r=!c)):(c=f,(e||!f)&&(f="error",0>e&&(e=0))),z.status=e,z.statusText=(n||f)+"",r?$.resolveWith(A,[a,f,z]):$.rejectWith(A,[z,f,c]),z.statusCode(q),q=void 0,F&&D.trigger(r?"ajaxSuccess":"ajaxError",[z,j,r?a:c]),N.fireWith(A,[z,f]),F&&(D.trigger("ajaxComplete",[z,j]),--t.active||t.event.trigger("ajaxStop")))}"object"==typeof s&&(a=s,s=void 0),a=a||{};var x,w,k,C,S,T,F,E,j=t.ajaxSetup({},a),A=j.context||j,D=j.context&&(A.nodeType||A.jquery)?t(A):t.event,$=t.Deferred(),N=t.Callbacks("once memory"),q=j.statusCode||{},M={},L={},H=0,O="canceled",z={readyState:0,getResponseHeader:function(t){var e;if(2===H){if(!C)for(C={};e=d.exec(k);)C[e[1].toLowerCase()]=e[2];e=C[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===H?k:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return H||(t=L[n]=L[n]||t,M[t]=e),this},overrideMimeType:function(t){return H||(j.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>H)for(e in t)q[e]=[q[e],t[e]];else z.always(t[z.status]);return this},abort:function(t){var e=t||O;return x&&x.abort(e),f(0,e),this}};if($.promise(z).complete=N.add,z.success=z.done,z.error=z.fail,j.url=((s||j.url||y)+"").replace(c,"").replace(p,b[1]+"//"),j.type=a.method||a.type||j.method||j.type,j.dataTypes=t.trim(j.dataType||"*").toLowerCase().match(e)||[""],null==j.crossDomain&&(T=g.exec(j.url.toLowerCase()),j.crossDomain=!(!T||T[1]===b[1]&&T[2]===b[2]&&(T[3]||("http:"===T[1]?"80":"443"))===(b[3]||("http:"===b[1]?"80":"443")))),j.data&&j.processData&&"string"!=typeof j.data&&(j.data=t.param(j.data,j.traditional)),r(m,j,a,z),2===H)return z;F=t.event&&j.global,F&&0===t.active++&&t.event.trigger("ajaxStart"),j.type=j.type.toUpperCase(),j.hasContent=!h.test(j.type),w=j.url,j.hasContent||(j.data&&(w=j.url+=(i.test(w)?"&":"?")+j.data,delete j.data),j.cache===!1&&(j.url=u.test(w)?w.replace(u,"$1_="+n++):w+(i.test(w)?"&":"?")+"_="+n++)),j.ifModified&&(t.lastModified[w]&&z.setRequestHeader("If-Modified-Since",t.lastModified[w]),t.etag[w]&&z.setRequestHeader("If-None-Match",t.etag[w])),(j.data&&j.hasContent&&j.contentType!==!1||a.contentType)&&z.setRequestHeader("Content-Type",j.contentType),z.setRequestHeader("Accept",j.dataTypes[0]&&j.accepts[j.dataTypes[0]]?j.accepts[j.dataTypes[0]]+("*"!==j.dataTypes[0]?", "+_+"; q=0.01":""):j.accepts["*"]);for(E in j.headers)z.setRequestHeader(E,j.headers[E]);if(j.beforeSend&&(j.beforeSend.call(A,z,j)===!1||2===H))return z.abort();O="abort";for(E in{success:1,error:1,complete:1})z[E](j[E]);if(x=r(v,j,a,z)){z.readyState=1,F&&D.trigger("ajaxSend",[z,j]),j.async&&j.timeout>0&&(S=setTimeout(function(){z.abort("timeout")},j.timeout));try{H=1,x.send(M,f)}catch(I){if(!(2>H))throw I;f(-1,I)}}else f(-1,"No Transport");return z},getJSON:function(e,n,i){return t.get(e,n,i,"json")},getScript:function(e,n){return t.get(e,void 0,n,"script")}}),t.each(["get","post"],function(e,n){t[n]=function(e,i,s,r){return t.isFunction(i)&&(r=r||s,s=i,i=void 0),t.ajax({url:e,type:n,dataType:r,data:i,success:s})}}),t});
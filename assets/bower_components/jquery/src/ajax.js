define(["./core","./var/rnotwhite","./ajax/var/nonce","./ajax/var/rquery","./core/init","./ajax/parseJSON","./ajax/parseXML","./deferred"],function(e,t,n,r){function o(n){return function(r,o){"string"!=typeof r&&(o=r,r="*");var i,a=0,s=r.toLowerCase().match(t)||[];if(e.isFunction(o))for(;i=s[a++];)"+"===i[0]?(i=i.slice(1)||"*",(n[i]=n[i]||[]).unshift(o)):(n[i]=n[i]||[]).push(o)}}function i(t,n,r,o){function i(l){var u;return a[l]=!0,e.each(t[l]||[],function(e,t){var l=t(n,r,o);return"string"!=typeof l||s||a[l]?s?!(u=l):void 0:(n.dataTypes.unshift(l),i(l),!1)}),u}var a={},s=t===b;return i(n.dataTypes[0])||!a["*"]&&i("*")}function a(t,n){var r,o,i=e.ajaxSettings.flatOptions||{};for(r in n)void 0!==n[r]&&((i[r]?t:o||(o={}))[r]=n[r]);return o&&e.extend(!0,t,o),t}function s(e,t,n){for(var r,o,i,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(o in s)if(s[o]&&s[o].test(r)){l.unshift(o);break}if(l[0]in n)i=l[0];else{for(o in n){if(!l[0]||e.converters[o+" "+l[0]]){i=o;break}a||(a=o)}i=i||a}return i?(i!==l[0]&&l.unshift(i),n[i]):void 0}function l(e,t,n,r){var o,i,a,s,l,u={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];for(i=c.shift();i;)if(e.responseFields[i]&&(n[e.responseFields[i]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=i,i=c.shift())if("*"===i)i=l;else if("*"!==l&&l!==i){if(a=u[l+" "+i]||u["* "+i],!a)for(o in u)if(s=o.split(" "),s[1]===i&&(a=u[l+" "+s[0]]||u["* "+s[0]])){a===!0?a=u[o]:u[o]!==!0&&(i=s[0],c.unshift(s[1]));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(d){return{state:"parsererror",error:a?d:"No conversion from "+l+" to "+i}}}return{state:"success",data:t}}var u,c,d=/#.*$/,f=/([?&])_=[^&]*/,p=/^(.*?):[ \t]*([^\r\n]*)$/gm,h=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,m=/^(?:GET|HEAD)$/,g=/^\/\//,v=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,y={},b={},x="*/".concat("*");try{c=location.href}catch(w){c=document.createElement("a"),c.href="",c=c.href}return u=v.exec(c.toLowerCase())||[],e.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:c,type:"GET",isLocal:h.test(u[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":x,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":e.parseJSON,"text xml":e.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,n){return n?a(a(t,e.ajaxSettings),n):a(e.ajaxSettings,t)},ajaxPrefilter:o(y),ajaxTransport:o(b),ajax:function(o,a){function h(t,n,r,o){var i,a,u,c,d,f=n;2!==z&&(z=2,S&&clearTimeout(S),w=void 0,N=o||"",P.readyState=t>0?4:0,i=t>=200&&300>t||304===t,r&&(c=s(M,P,r)),c=l(M,c,P,i),i?(M.ifModified&&(d=P.getResponseHeader("Last-Modified"),d&&(e.lastModified[T]=d),d=P.getResponseHeader("etag"),d&&(e.etag[T]=d)),204===t||"HEAD"===M.type?f="nocontent":304===t?f="notmodified":(f=c.state,a=c.data,u=c.error,i=!u)):(u=f,(t||!f)&&(f="error",0>t&&(t=0))),P.status=t,P.statusText=(n||f)+"",i?D.resolveWith(A,[a,f,P]):D.rejectWith(A,[P,f,u]),P.statusCode(O),O=void 0,C&&q.trigger(i?"ajaxSuccess":"ajaxError",[P,M,i?a:u]),L.fireWith(A,[P,f]),C&&(q.trigger("ajaxComplete",[P,M]),--e.active||e.event.trigger("ajaxStop")))}"object"==typeof o&&(a=o,o=void 0),a=a||{};var w,T,N,k,S,E,C,j,M=e.ajaxSetup({},a),A=M.context||M,q=M.context&&(A.nodeType||A.jquery)?e(A):e.event,D=e.Deferred(),L=e.Callbacks("once memory"),O=M.statusCode||{},F={},_={},z=0,H="canceled",P={readyState:0,getResponseHeader:function(e){var t;if(2===z){if(!k)for(k={};t=p.exec(N);)k[t[1].toLowerCase()]=t[2];t=k[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===z?N:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return z||(e=_[n]=_[n]||e,F[e]=t),this},overrideMimeType:function(e){return z||(M.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>z)for(t in e)O[t]=[O[t],e[t]];else P.always(e[P.status]);return this},abort:function(e){var t=e||H;return w&&w.abort(t),h(0,t),this}};if(D.promise(P).complete=L.add,P.success=P.done,P.error=P.fail,M.url=((o||M.url||c)+"").replace(d,"").replace(g,u[1]+"//"),M.type=a.method||a.type||M.method||M.type,M.dataTypes=e.trim(M.dataType||"*").toLowerCase().match(t)||[""],null==M.crossDomain&&(E=v.exec(M.url.toLowerCase()),M.crossDomain=!(!E||E[1]===u[1]&&E[2]===u[2]&&(E[3]||("http:"===E[1]?"80":"443"))===(u[3]||("http:"===u[1]?"80":"443")))),M.data&&M.processData&&"string"!=typeof M.data&&(M.data=e.param(M.data,M.traditional)),i(y,M,a,P),2===z)return P;C=M.global,C&&0===e.active++&&e.event.trigger("ajaxStart"),M.type=M.type.toUpperCase(),M.hasContent=!m.test(M.type),T=M.url,M.hasContent||(M.data&&(T=M.url+=(r.test(T)?"&":"?")+M.data,delete M.data),M.cache===!1&&(M.url=f.test(T)?T.replace(f,"$1_="+n++):T+(r.test(T)?"&":"?")+"_="+n++)),M.ifModified&&(e.lastModified[T]&&P.setRequestHeader("If-Modified-Since",e.lastModified[T]),e.etag[T]&&P.setRequestHeader("If-None-Match",e.etag[T])),(M.data&&M.hasContent&&M.contentType!==!1||a.contentType)&&P.setRequestHeader("Content-Type",M.contentType),P.setRequestHeader("Accept",M.dataTypes[0]&&M.accepts[M.dataTypes[0]]?M.accepts[M.dataTypes[0]]+("*"!==M.dataTypes[0]?", "+x+"; q=0.01":""):M.accepts["*"]);for(j in M.headers)P.setRequestHeader(j,M.headers[j]);if(M.beforeSend&&(M.beforeSend.call(A,P,M)===!1||2===z))return P.abort();H="abort";for(j in{success:1,error:1,complete:1})P[j](M[j]);if(w=i(b,M,a,P)){P.readyState=1,C&&q.trigger("ajaxSend",[P,M]),M.async&&M.timeout>0&&(S=setTimeout(function(){P.abort("timeout")},M.timeout));try{z=1,w.send(F,h)}catch(B){if(!(2>z))throw B;h(-1,B)}}else h(-1,"No Transport");return P},getJSON:function(t,n,r){return e.get(t,n,r,"json")},getScript:function(t,n){return e.get(t,void 0,n,"script")}}),e.each(["get","post"],function(t,n){e[n]=function(t,r,o,i){return e.isFunction(r)&&(i=i||o,o=r,r=void 0),e.ajax({url:t,type:n,dataType:i,data:r,success:o})}}),e.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,n){e.fn[n]=function(e){return this.on(n,e)}}),e});
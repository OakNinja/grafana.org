define(["./core","./var/rnotwhite","./ajax/var/nonce","./ajax/var/rquery","./core/init","./ajax/parseJSON","./ajax/parseXML","./deferred"],function(e,t,n,i){function r(n){return function(i,r){"string"!=typeof i&&(r=i,i="*");var o,s=0,a=i.toLowerCase().match(t)||[];if(e.isFunction(r))for(;o=a[s++];)"+"===o[0]?(o=o.slice(1)||"*",(n[o]=n[o]||[]).unshift(r)):(n[o]=n[o]||[]).push(r)}}function o(t,n,i,r){function o(l){var c;return s[l]=!0,e.each(t[l]||[],function(e,t){var l=t(n,i,r);return"string"!=typeof l||a||s[l]?a?!(c=l):void 0:(n.dataTypes.unshift(l),o(l),!1)}),c}var s={},a=t===b;return o(n.dataTypes[0])||!s["*"]&&o("*")}function s(t,n){var i,r,o=e.ajaxSettings.flatOptions||{};for(i in n)void 0!==n[i]&&((o[i]?t:r||(r={}))[i]=n[i]);return r&&e.extend(!0,t,r),t}function a(e,t,n){for(var i,r,o,s,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(r in a)if(a[r]&&a[r].test(i)){l.unshift(r);break}if(l[0]in n)o=l[0];else{for(r in n){if(!l[0]||e.converters[r+" "+l[0]]){o=r;break}s||(s=r)}o=o||s}return o?(o!==l[0]&&l.unshift(o),n[o]):void 0}function l(e,t,n,i){var r,o,s,a,l,c={},u=e.dataTypes.slice();if(u[1])for(s in e.converters)c[s.toLowerCase()]=e.converters[s];for(o=u.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(s=c[l+" "+o]||c["* "+o],!s)for(r in c)if(a=r.split(" "),a[1]===o&&(s=c[l+" "+a[0]]||c["* "+a[0]])){s===!0?s=c[r]:c[r]!==!0&&(o=a[0],u.unshift(a[1]));break}if(s!==!0)if(s&&e["throws"])t=s(t);else try{t=s(t)}catch(d){return{state:"parsererror",error:s?d:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}var c,u,d=/#.*$/,f=/([?&])_=[^&]*/,p=/^(.*?):[ \t]*([^\r\n]*)$/gm,h=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,m=/^(?:GET|HEAD)$/,g=/^\/\//,v=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,y={},b={},x="*/".concat("*");try{u=location.href}catch(w){u=document.createElement("a"),u.href="",u=u.href}return c=v.exec(u.toLowerCase())||[],e.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:u,type:"GET",isLocal:h.test(c[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":x,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":e.parseJSON,"text xml":e.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,n){return n?s(s(t,e.ajaxSettings),n):s(e.ajaxSettings,t)},ajaxPrefilter:r(y),ajaxTransport:r(b),ajax:function(r,s){function h(t,n,i,r){var o,s,c,u,d,f=n;2!==O&&(O=2,k&&clearTimeout(k),w=void 0,C=r||"",$.readyState=t>0?4:0,o=t>=200&&300>t||304===t,i&&(u=a(N,$,i)),u=l(N,u,$,o),o?(N.ifModified&&(d=$.getResponseHeader("Last-Modified"),d&&(e.lastModified[_]=d),d=$.getResponseHeader("etag"),d&&(e.etag[_]=d)),204===t||"HEAD"===N.type?f="nocontent":304===t?f="notmodified":(f=u.state,s=u.data,c=u.error,o=!c)):(c=f,(t||!f)&&(f="error",0>t&&(t=0))),$.status=t,$.statusText=(n||f)+"",o?D.resolveWith(j,[s,f,$]):D.rejectWith(j,[$,f,c]),$.statusCode(q),q=void 0,E&&M.trigger(o?"ajaxSuccess":"ajaxError",[$,N,o?s:c]),F.fireWith(j,[$,f]),E&&(M.trigger("ajaxComplete",[$,N]),--e.active||e.event.trigger("ajaxStop")))}"object"==typeof r&&(s=r,r=void 0),s=s||{};var w,_,C,T,k,S,E,A,N=e.ajaxSetup({},s),j=N.context||N,M=N.context&&(j.nodeType||j.jquery)?e(j):e.event,D=e.Deferred(),F=e.Callbacks("once memory"),q=N.statusCode||{},z={},L={},O=0,P="canceled",$={readyState:0,getResponseHeader:function(e){var t;if(2===O){if(!T)for(T={};t=p.exec(C);)T[t[1].toLowerCase()]=t[2];t=T[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===O?C:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return O||(e=L[n]=L[n]||e,z[e]=t),this},overrideMimeType:function(e){return O||(N.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>O)for(t in e)q[t]=[q[t],e[t]];else $.always(e[$.status]);return this},abort:function(e){var t=e||P;return w&&w.abort(t),h(0,t),this}};if(D.promise($).complete=F.add,$.success=$.done,$.error=$.fail,N.url=((r||N.url||u)+"").replace(d,"").replace(g,c[1]+"//"),N.type=s.method||s.type||N.method||N.type,N.dataTypes=e.trim(N.dataType||"*").toLowerCase().match(t)||[""],null==N.crossDomain&&(S=v.exec(N.url.toLowerCase()),N.crossDomain=!(!S||S[1]===c[1]&&S[2]===c[2]&&(S[3]||("http:"===S[1]?"80":"443"))===(c[3]||("http:"===c[1]?"80":"443")))),N.data&&N.processData&&"string"!=typeof N.data&&(N.data=e.param(N.data,N.traditional)),o(y,N,s,$),2===O)return $;E=N.global,E&&0===e.active++&&e.event.trigger("ajaxStart"),N.type=N.type.toUpperCase(),N.hasContent=!m.test(N.type),_=N.url,N.hasContent||(N.data&&(_=N.url+=(i.test(_)?"&":"?")+N.data,delete N.data),N.cache===!1&&(N.url=f.test(_)?_.replace(f,"$1_="+n++):_+(i.test(_)?"&":"?")+"_="+n++)),N.ifModified&&(e.lastModified[_]&&$.setRequestHeader("If-Modified-Since",e.lastModified[_]),e.etag[_]&&$.setRequestHeader("If-None-Match",e.etag[_])),(N.data&&N.hasContent&&N.contentType!==!1||s.contentType)&&$.setRequestHeader("Content-Type",N.contentType),$.setRequestHeader("Accept",N.dataTypes[0]&&N.accepts[N.dataTypes[0]]?N.accepts[N.dataTypes[0]]+("*"!==N.dataTypes[0]?", "+x+"; q=0.01":""):N.accepts["*"]);for(A in N.headers)$.setRequestHeader(A,N.headers[A]);if(N.beforeSend&&(N.beforeSend.call(j,$,N)===!1||2===O))return $.abort();P="abort";for(A in{success:1,error:1,complete:1})$[A](N[A]);if(w=o(b,N,s,$)){$.readyState=1,E&&M.trigger("ajaxSend",[$,N]),N.async&&N.timeout>0&&(k=setTimeout(function(){$.abort("timeout")},N.timeout));try{O=1,w.send(z,h)}catch(H){if(!(2>O))throw H;h(-1,H)}}else h(-1,"No Transport");return $},getJSON:function(t,n,i){return e.get(t,n,i,"json")},getScript:function(t,n){return e.get(t,void 0,n,"script")}}),e.each(["get","post"],function(t,n){e[n]=function(t,i,r,o){return e.isFunction(i)&&(o=o||r,r=i,i=void 0),e.ajax({url:t,type:n,dataType:o,data:i,success:r})}}),e.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,n){e.fn[n]=function(e){return this.on(n,e)}}),e});
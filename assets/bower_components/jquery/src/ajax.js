define(["./core","./var/rnotwhite","./ajax/var/nonce","./ajax/var/rquery","./core/init","./ajax/parseJSON","./ajax/parseXML","./deferred"],function(t,e,n,i){function r(n){return function(i,r){"string"!=typeof i&&(r=i,i="*");var o,a=0,s=i.toLowerCase().match(e)||[];if(t.isFunction(r))for(;o=s[a++];)"+"===o[0]?(o=o.slice(1)||"*",(n[o]=n[o]||[]).unshift(r)):(n[o]=n[o]||[]).push(r)}}function o(e,n,i,r){function o(l){var c;return a[l]=!0,t.each(e[l]||[],function(t,e){var l=e(n,i,r);return"string"!=typeof l||s||a[l]?s?!(c=l):void 0:(n.dataTypes.unshift(l),o(l),!1)}),c}var a={},s=e===v;return o(n.dataTypes[0])||!a["*"]&&o("*")}function a(e,n){var i,r,o=t.ajaxSettings.flatOptions||{};for(i in n)void 0!==n[i]&&((o[i]?e:r||(r={}))[i]=n[i]);return r&&t.extend(!0,e,r),e}function s(t,e,n){for(var i,r,o,a,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(r in s)if(s[r]&&s[r].test(i)){l.unshift(r);break}if(l[0]in n)o=l[0];else{for(r in n){if(!l[0]||t.converters[r+" "+l[0]]){o=r;break}a||(a=r)}o=o||a}return o?(o!==l[0]&&l.unshift(o),n[o]):void 0}function l(t,e,n,i){var r,o,a,s,l,c={},u=t.dataTypes.slice();if(u[1])for(a in t.converters)c[a.toLowerCase()]=t.converters[a];for(o=u.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(a=c[l+" "+o]||c["* "+o],!a)for(r in c)if(s=r.split(" "),s[1]===o&&(a=c[l+" "+s[0]]||c["* "+s[0]])){a===!0?a=c[r]:c[r]!==!0&&(o=s[0],u.unshift(s[1]));break}if(a!==!0)if(a&&t["throws"])e=a(e);else try{e=a(e)}catch(d){return{state:"parsererror",error:a?d:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}var c=/#.*$/,u=/([?&])_=[^&]*/,d=/^(.*?):[ \t]*([^\r\n]*)$/gm,f=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,p=/^(?:GET|HEAD)$/,h=/^\/\//,g=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,m={},v={},y="*/".concat("*"),b=window.location.href,_=g.exec(b.toLowerCase())||[];return t.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:b,type:"GET",isLocal:f.test(_[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":y,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":t.parseJSON,"text xml":t.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,n){return n?a(a(e,t.ajaxSettings),n):a(t.ajaxSettings,e)},ajaxPrefilter:r(m),ajaxTransport:r(v),ajax:function(r,a){function f(e,n,i,r){var o,a,c,u,d,f=n;2!==O&&(O=2,T&&clearTimeout(T),x=void 0,k=r||"",H.readyState=e>0?4:0,o=e>=200&&300>e||304===e,i&&(u=s(N,H,i)),u=l(N,u,H,o),o?(N.ifModified&&(d=H.getResponseHeader("Last-Modified"),d&&(t.lastModified[w]=d),d=H.getResponseHeader("etag"),d&&(t.etag[w]=d)),204===e||"HEAD"===N.type?f="nocontent":304===e?f="notmodified":(f=u.state,a=u.data,c=u.error,o=!c)):(c=f,(e||!f)&&(f="error",0>e&&(e=0))),H.status=e,H.statusText=(n||f)+"",o?D.resolveWith(F,[a,f,H]):D.rejectWith(F,[H,f,c]),H.statusCode(q),q=void 0,E&&A.trigger(o?"ajaxSuccess":"ajaxError",[H,N,o?a:c]),M.fireWith(F,[H,f]),E&&(A.trigger("ajaxComplete",[H,N]),--t.active||t.event.trigger("ajaxStop")))}"object"==typeof r&&(a=r,r=void 0),a=a||{};var x,w,k,C,T,S,E,j,N=t.ajaxSetup({},a),F=N.context||N,A=N.context&&(F.nodeType||F.jquery)?t(F):t.event,D=t.Deferred(),M=t.Callbacks("once memory"),q=N.statusCode||{},L={},$={},O=0,z="canceled",H={readyState:0,getResponseHeader:function(t){var e;if(2===O){if(!C)for(C={};e=d.exec(k);)C[e[1].toLowerCase()]=e[2];e=C[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===O?k:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return O||(t=$[n]=$[n]||t,L[t]=e),this},overrideMimeType:function(t){return O||(N.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>O)for(e in t)q[e]=[q[e],t[e]];else H.always(t[H.status]);return this},abort:function(t){var e=t||z;return x&&x.abort(e),f(0,e),this}};if(D.promise(H).complete=M.add,H.success=H.done,H.error=H.fail,N.url=((r||N.url||b)+"").replace(c,"").replace(h,_[1]+"//"),N.type=a.method||a.type||N.method||N.type,N.dataTypes=t.trim(N.dataType||"*").toLowerCase().match(e)||[""],null==N.crossDomain&&(S=g.exec(N.url.toLowerCase()),N.crossDomain=!(!S||S[1]===_[1]&&S[2]===_[2]&&(S[3]||("http:"===S[1]?"80":"443"))===(_[3]||("http:"===_[1]?"80":"443")))),N.data&&N.processData&&"string"!=typeof N.data&&(N.data=t.param(N.data,N.traditional)),o(m,N,a,H),2===O)return H;E=t.event&&N.global,E&&0===t.active++&&t.event.trigger("ajaxStart"),N.type=N.type.toUpperCase(),N.hasContent=!p.test(N.type),w=N.url,N.hasContent||(N.data&&(w=N.url+=(i.test(w)?"&":"?")+N.data,delete N.data),N.cache===!1&&(N.url=u.test(w)?w.replace(u,"$1_="+n++):w+(i.test(w)?"&":"?")+"_="+n++)),N.ifModified&&(t.lastModified[w]&&H.setRequestHeader("If-Modified-Since",t.lastModified[w]),t.etag[w]&&H.setRequestHeader("If-None-Match",t.etag[w])),(N.data&&N.hasContent&&N.contentType!==!1||a.contentType)&&H.setRequestHeader("Content-Type",N.contentType),H.setRequestHeader("Accept",N.dataTypes[0]&&N.accepts[N.dataTypes[0]]?N.accepts[N.dataTypes[0]]+("*"!==N.dataTypes[0]?", "+y+"; q=0.01":""):N.accepts["*"]);for(j in N.headers)H.setRequestHeader(j,N.headers[j]);if(N.beforeSend&&(N.beforeSend.call(F,H,N)===!1||2===O))return H.abort();z="abort";for(j in{success:1,error:1,complete:1})H[j](N[j]);if(x=o(v,N,a,H)){H.readyState=1,E&&A.trigger("ajaxSend",[H,N]),N.async&&N.timeout>0&&(T=setTimeout(function(){H.abort("timeout")},N.timeout));try{O=1,x.send(L,f)}catch(P){if(!(2>O))throw P;f(-1,P)}}else f(-1,"No Transport");return H},getJSON:function(e,n,i){return t.get(e,n,i,"json")},getScript:function(e,n){return t.get(e,void 0,n,"script")}}),t.each(["get","post"],function(e,n){t[n]=function(e,i,r,o){return t.isFunction(i)&&(o=o||r,r=i,i=void 0),t.ajax({url:e,type:n,dataType:o,data:i,success:r})}}),t});